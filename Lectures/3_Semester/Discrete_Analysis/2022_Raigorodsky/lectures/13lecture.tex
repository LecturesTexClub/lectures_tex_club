\subsection{Гиперграфы}

\begin{definition}
	\textit{Гиперграфом} $H = (V, E)$ называется пара из множеств $V$ --- вершины и $E \subseteq 2^V$ --- гиперрёбра. Если не оговорено явно обратного, то мы требуем, что у любого гиперребра как минимум 2 вершины, ему принадлежащие: $\forall A \in E\ |A| \ge 2$.
\end{definition}

\begin{definition}
	Гиперграф $H = (V, E)$ называется $r$-однородным, если мощность любого его ребра равна $r$:
	\[
		\forall A \in E\ \ |A| = r
	\]
\end{definition}

\begin{definition}
	Величиной $f(n, r, s)$ в теории гиперграфов обозначается экстремальная величина, равная максимальному $k \in \N$, для которого существует $r$-однородный гиперграф с $k$ рёбрами на $n$ вершинах такой, что $\forall A, B \in E\ \ |A \cap B| \ge s$
\end{definition}

\begin{note}
	$f(n, r, s)$ отражает максимальное количество рёбер в графе на $n$ вершинах, где они плотно пересекаются (по не менее чем $s$ вершинам).
\end{note}

\begin{definition}
	Величиной $h(n, r, s)$ в теории гиперграфов обозначается экстремальная величина, равная максимальному $k \in \N$, для которого существует $r$-однородный гиперграф с $k$ рёбрами на $n$ вершинах такой, что $\forall A, B \in E\ \ |A \cap B| \le s$
\end{definition}

\begin{note}
	$h(n, r, s)$ отражает максимальное количество рёбер в гиперграфе на $n$ вершинах, где они разреженно пересекаются (по не более чем $s$ вершинам).
\end{note}

\begin{note}
	Гиперграфы, которые рассматривает $h(n, r, s)$, уже встречались ранее в курсе ОКТЧ. Это задача о кодах, исправляющих ошибки. У нас снова сообщение из $n$ битов с ровно $r$ числом единиц. Требование $|A \cap B| \le s$ эквивалентно $(\vec{x}_A, \vec{x}_B) \le s$. Это же значит, что у нас не более $s$ одинаковых позиций, на которых стоят единицы, то есть расстояние между словами $\ge 2(r - s)$. Это значит, что мы можем позволить делать $< r - s$ искажений на каждое сообщение, чтобы мы всё ещё могли отличить одно от другого и восстановить их.
\end{note}

\begin{definition}
	Величиной $m(n, r, s)$ в теории гиперграфов обозначается экстремальная величина, равная максимальному $k \in \N$, для которого существует $r$-однородный гиперграф с $k$ рёбрами на $n$ вершинах такой, что $\forall A, B \in E\ \ |A \cap B| \neq s$
\end{definition}

\begin{note}
	$m(n, r, s)$ отражает максимальное количество рёбер в гиперграфе на $n$ вершинах, где просто запрещено пересечение по конкретному числу $s$.
\end{note}

\begin{note}
	В конце ОКТЧ у нас был один интересный граф для теоремы Эрдеша-Хватала: $V = \{A \subseteq \{1, \ldots, n\} \colon |A| = 3\}$, $E = \{(A, B) \colon |A \cap B| = 1\}$. Его естественно можно обобщить до общей конструкции. Также мы доказали следующий факт про число независимости этого графа:
	\[
		\alpha(G(n, 3, 1)) = \System{
			&{n,\ n \equiv 0 \pmod 4}
			\\
			&{n - 1,\ n \equiv 1 \pmod 4}
			\\
			&{n - 2, \text{ иначе}}
		}
	\]
\end{note}

\begin{definition}
	Графом $G(n, r, s)$ называется граф $(V, E)$, где
	\begin{itemize}
		\item $V = \{A \subseteq \{1, \ldots, n\} \colon |A| = r\}$
		
		\item $E = \{(A, B) \colon |A \cap B| = s\}$
	\end{itemize}
\end{definition}

\begin{proposition}
	Имеет место равенство: \(m(n, r, s) = \alpha(G(n, r, s))\)
\end{proposition}

\begin{proof}
	По определению
\end{proof}

\begin{theorem}
	Имеет место оценка сверху: \(h(n, r, s) \le C_n^{s + 1} / C_r^{s + 1}\)
\end{theorem}

\begin{proof}
	Рассмотрим любой гиперграф, удовлетворяющий начальным условиям $h(n, r, s)$. Пусть $A_1, \ldots, A_k$ --- это его гиперрёбра. Тогда $|A_i| = r$, $|A_i \cap A_j| \le s$. Рассмотрим все возможные $(s + 1)$-элементные подмножества вершин гиперграфа (то есть подмножества $\{1, \ldots, n\}$). С одной стороны, есть $C_r^{s + 1}$ таких подмножеств, которые лежат внутри каждого из $A_i$. Обозначим соответствующий набор подмножеств за $\cA_i$, то есть $|\cA_i| = C_r^{s + 1}$. Тогда из-за условия очевидно, что $\cA_i \cap \cA_j = \emptyset$. С другой стороны, всего $(s + 1)$-элементных подмножеств будет $C_n^{s + 1}$, а значит верна оценка:
	\[
		|\cA_1| + \ldots + |\cA_k| = k \cdot C_r^{s + 1} \le C_n^{s + 1} 
	\]
\end{proof}

\subsubsection*{Небольшая историческая справка}

\begin{itemize}
	\item В 1980г. математиком по фамилии Rödl было доказано, что если $r(n) = const, s(n) = const$, то имеет место неравенство \(h(n, r, s) \ge (1 + o(1)) \frac{C_n^{s + 1}}{C_r^{s + 1}}\)
	
	\item Около 2015г. математик по фамилии Keevash доказал в условиях соответствующей делимости, что $h(n, r, s) \ge \frac{C_n^{s + 1}}{C_r^{s + 1}}$. Более того, с некоторого $n$ это неравенство становится равенством.
\end{itemize}

\begin{proposition}
	Имеет место следующая нижняя оценка: \(m(n, 5, 2) \ge C_{n - 3}^2\)
\end{proposition}

\begin{proof}
	Действительно, пусть $V = \{1, \ldots, n\}$. Тогда возьмём во все рёбра числа $\{1, 2, 3\}$ и доберём из оставшихся $n - 3$ к ним любую пару. Таких будет ровно $C_{n - 3}^2$, и это заведомо меньше реального числа рёбер.
\end{proof}

\begin{theorem}
	Имеет место следующая оценка сверху: \(m(n, 5, 2) \le C_n^2 + 2C_n^1 \sim \frac{n^2}{2}\)
\end{theorem}

\begin{note}
	Эта теорема проясняет суть нижней оценки. Несмотря на то, что мы не учли какое-то число рёбер, асимптотически мы точно угадали, ибо $C_{n - 3}^2 \sim \frac{n^2}{2}$
\end{note}

\begin{proof}
	Рассмотрим произвольный гиперграф $H = (\{1, \ldots, n\}, \{A_1, \ldots, A_t\})$, удовлетворяющий требованиям $m(n, 5, 2)$ (скажем, что у нашего гиперграфа всего $t$ рёбер). 
	
	Действуя также, как и в случае $m(n, 3, 1)$, мы сопоставим каждому ребру $A_i$ вектор из $\{0, 1\}^n$. Тогда на эти вектора наложены 2 требования:
	\begin{align*}
		&{\forall i \in \range{n}\ (\vv{x}_i, \vv{x}_i) = 5}
		\\
		&{\forall i \neq j\ (\vv{x}_i, \vv{x}_j) \neq 3}
	\end{align*}
	Раньше мы могли сослаться на независимость векторов, а теперь так не выйдет (рёбер сильно больше). Поэтому мы сопоставим каждому вектору его многочлен $P_i \in \Z_3[\vv{y}]$, $\vv{y} \in \{0, 1\}^n$:
	\[
		P_i(\vv{y}) = (\vv{x}_i, \vv{y})((\vv{x}_i, \vv{y}) - 1)
	\]
	Если мы докажем, что эти многочлены линейно независимы, то победа у нас в кармане:
	\begin{enumerate}
		\item Эти многочлены существуют в подпространстве многочленов со степенью по $y_i$ не выше двух над $\Z_3$ (координаты $\vv{y}$ нужно понимать как независимые переменные)
		
		\item Базисные многочлены подпространства --- это одночлены $y_i^2$, $y_i$, $y_iy_j$
		
		\item Размерность подпространства определяется через размер базиса, а это нужно посчитать число различных векторов из предыдущего пункта, коих $C_n^1 + C_n^1 + C_n^2 = 2C_n^1 + C_n^2$
	\end{enumerate}
	Итак, рассмотрим произвольную линейную комбинацию многочленов, которая оказалась равна нулевому многочлену:
	\[
		c_1P_1 + \ldots + c_tP_t = 0
	\]
	В частности, это равенство верно при подстановке конкретных значений $\vv{y} \in \{0, 1\}^n$:
	\[
		c_1P_1(\vv{y}) + \ldots + c_tP_t(\vv{y}) = 0(\vv{y}) = 0
	\]
	Не умаляя общности, посмотрим на $\vv{y} = \vv{x}_1$:
	\begin{enumerate}
		\item $P_1(\vv{x}_1) = (\vv{x}_1, \vv{x}_1)((\vv{x}_1, \vv{x}_1) - 1) = 2$ (ибо $20 \equiv 2 \pmod 3$)
		
		\item $\forall i > 1\ P_i(\vv{x}_1) = (\vv{x}_i, \vv{x}_1)((\vv{x}_i, \vv{x}_1) - 1) = 0$ при всех допустимых значениях скалярного произведение (а это либо 0, либо 1 по модулю 3)
	\end{enumerate}
	Отсюда получаем, что $c_1 = 0$, но то же самое верно и для остальных $c_i$.
\end{proof}

\begin{theorem}
	Имеет место следующая оценка сверху: \(m(n, 5, 2) \le C_n^2\)
\end{theorem}

\begin{proof}
	Доказательство почти полностью повторяет уже имеющееся, надо просто взять более хорошие многочлены. Распишем $P_i$ подробно:
	\[
		P_i(\vv{y}) = (x_{1, i}y_1 + \ldots + x_{n, i}y_n)(x_{1, i}y_1 + \ldots + x_{n, i}y_n - 1) = \sum_{j = 1}^n (x_{j, i}y_j)^2 - \sum_{j = 1}^n x_{j, i}y_j + \sum_{j \neq k} (x_{j, i}y_j)(x_{k, i}y_k)
	\]
	Несложно понять, что при $\vv{y} \in \{0, 1\}^n$ первые 2 суммы всегда схлопывают друг друга, то есть значение всего многочлена совпадает со значением последней суммы. Положим эти выражения за новые $P'_i(\vv{y})$, тогда они живут в подпространстве, чья размерность $C_n^2$. Дальнейшее доказательство повторяет точь-в-точь то, что написано выше.
\end{proof}

\begin{theorem}
	Имеет место следующая нижняя оценка: $m(n, r, s) \ge C_{n - s - 1}^{r - s - 1}$
\end{theorem}

\begin{proof}
	Доказательство в точности повторяет то, что мы сказали для $m(n, 5, 2)$ ранее.
\end{proof}

\begin{theorem} (1981г., Франкл, Уилсон)
	Пусть $r - s = p^\alpha$, где $p \in \bP$, $\alpha \in \N$. Также потребуем, что $r - 2p^\alpha < 0$. Тогда верна следующая оценка сверху:
	\[
		m(n, r, s) \le \sum_{k = 0}^{p^\alpha - 1} C_n^k
	\]
\end{theorem}

\begin{note}
	Если $r(n), s(n) = const$, то имеет место асимтотическое утверждение:
	\[
		m(n, r, s) \sim \sum_{k = 0}^{p^\alpha - 1} C_n^k \sim \frac{n^{r - s - 1}}{(r - s - 1)!}
	\]
	Это работает, коль скоро фиксация $r, s$ даёт нам фиксированное значение $p^\alpha$ для каждого $n$. Стало быть, сумму коэффициентов можно оценить последним.
\end{note}

\begin{proof}
	Доказывается только случай $\alpha = 1$, он по сути является обобщением того, что уже доказали для $m(n, 5, 2)$. Возьмём произвольный гиперграф $H = (\{1, \ldots, n\}, E)$, удовлетворяющий условиям $m(n, r, s)$. Обозначим число гиперрёбер за $t$, каждое ребро за $A_i$ и перейдём к уже известным векторам $\vv{x}_i$. В общем случае, многочлен $P_i \in \Z_p[\vv{y}]$ имеет вид:
	\[
		P_i(\vv{y}) = \prod_{j = 0 \atop {j \neq s}}^{p - 1} ((\vv{x}_i, \vv{y}) - j)
	\]
	Понятно, что $\deg P_i \le p - 1$. Мы живём и смотрим на многочлены в таком пространстве, что  них подставляются только $\vv{y} \in \{0, 1\}^n$. Тогда $P'_i$ --- это просто раскрытый многочлен $P_i$, где у каждого одночлена срезали степени переменных до не более 1й. Тогда каков базис пространства $\dim \trb{P'_i}$? Он состоит из всех одночленов вида $1$, $y_1$, $y_1y_2$, $\ldots$, $y_1\ldots y_{p - 1}$. Иначе говоря, верно равенство:
	\[
		\dim \trb{P'_i} = C_n^0 + C_n^1 + \ldots + C_n^{p - 1} = \sum_{k = 0}^{p - 1} C_n^k
	\]
	Осталось стандартным образом показать, что многочлены $P'_i$ независимы. Запишем произвольную линейную комбинацию:
	\[
		c_1P'_1 + \ldots + c_tP'_t = 0,\ c_i \in \Z_p
	\]
	Снова рассмотрим, например, подстановку $\vv{y} = \vv{x}_1$. Тогда:
	\begin{enumerate}
		\item $P'_1(\vv{x_1}) = \prod_{j = 0 \atop {j \neq s}}^{p - 1} (r - j)$, при этом $r - s = p \Ra s = r - p$ и $r - 2p < 0$. Говоря иначе, наши ограничения так хитро подобраны, что в произведении не может получиться числа, кратного $p$. Стало быть, $P'_1(\vv{x}_1) \neq 0$
		
		\item $\forall i > 1\ P'_i(\vv{x}_1) = \prod_{j = 0 \atop {j \neq s}}^{p - 1} ((\vv{x}_i, \vv{x}_1) - j)$. Проверим, что $(\vv{x}_i, \vv{x}_1) \centernot\equiv s \pmod p$ (тогда мы точно занулимся по модулю). Мы знаем, что в просто целых числах $(\vv{x}_i, \vv{x}_1) < r$. Более того, по требованию $m(n, r, s)$ у нас всегда $(\vv{x}_i, \vv{x}_1) \neq s = r - p$, а $r - 2p$ уже меньше нуля. Стало быть, $P'_i(\vv{x}_1) \equiv 0 \pmod p$
	\end{enumerate}
	Снова пришли к тому, что $c_1 = 0$, но то же самое верно и для остальных векторов.
\end{proof}

\begin{theorem} (Улучшенная теорема Франкла-Уилсона)
	Пусть $r - s = p^\alpha$, где $p \in \bP$, $\alpha \in \N$. Тогда верна следующая оценка сверху:
	\[
		m(n, r, s) \le \sum_{k = 0}^{p^\alpha - 1} C_n^k
	\]
\end{theorem}

\begin{proof}
	Разница состоит в том, что мы отказались от требования $r - 2p < 0$. Так как этот случай доказан, то здесь нужно разобрать $r - 2p \ge 0$. \textcolor{red}{А это произойдёт уже после сессии, это вопрос на отл9.}
\end{proof}