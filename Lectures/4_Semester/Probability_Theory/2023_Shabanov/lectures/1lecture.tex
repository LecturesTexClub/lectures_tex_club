\section{Аксиоматика Колмогорова}

\begin{note}
	Теория вероятностей по своему смыслу является \textit{математическим анализом случайных явлений}.
\end{note}

\begin{reminder}
	Закон природы, позволяющий нам вообще думать о теории вероятностей, является \textit{принципом устойчивости частот}:
	
	\textit{При проведении серии одинаковых экспериментов частота появления события $A$ стремится к числу $p(A)$}:
	\[
		\frac{\nu_n(A)}{n} \xrightarrow[n \to \infty]{} p(A)
	\]
	где $\nu_n(A)$ --- количество экспериментов, где исход подходил под событие $A$.
\end{reminder}

\begin{definition}
	\textit{Вероятностным пространством (тройкой Колмогорова)} называется кортеж $(\Omega, \F, P)$, где
	\begin{itemize}
		\item $\Omega$ --- произвольное множество, называемое \textit{множеством (пространством) элементарных исходов}
		
		\item $\F$ --- \textit{множество событий}. Его элементы называются \textit{событиями}. Мы требуем, что множество является непустой $\sigma$-алгеброй подмножеств $\Omega$ (В частности, $\Omega \in \F$).
		
		\item $P \colon \F \to [0; 1]$ --- \textit{вероятностная мера на измеримом пространстве} $(\Omega, \F)$. От этой функции мы требуем двух вещей:
		\begin{itemize}
			\item $P$ --- $\sigma$-аддитивная мера на $\F$
			
			\item $P(\Omega) = 1$
		\end{itemize}
	\end{itemize}
\end{definition}

\begin{theorem} (Непрерывность вероятностной меры)
	Пусть $\cA$ --- алгебра или $\sigma$-алгебра подмножеств $\Omega$. Пусть $P \colon \cA \to [0; 1]$ --- функция, удовлетворяющая двум свойствам:
	\begin{itemize}
		\item $P$ обладает конечной аддитивностью
		
		\item $P(\Omega) = 1$
	\end{itemize}
	Тогда следующие условия эквивалентны:
	\begin{enumerate}
		\item $P$ --- $\sigma$-аддитивная функция на $\cA$.
		
		\item $P$ непрерывна в нуле, то есть
		\[
			\forall \{A_n\}_{n = 1}^\infty \subseteq \cA,\ A_n \supseteq A_{n + 1} \wedge \lim_{n \to \infty} A_n = \emptyset \Ra \lim_{n \to \infty} P(A_n) = 0 = P(\emptyset)
		\]
		
		\item $P$ непрерывна сверху:
		\[
			\forall \{A_n\}_{n = 1}^\infty \subseteq \cA,\ A_n \supseteq A_{n + 1} \wedge \lim_{n \to \infty} A_n = A \Ra \lim_{n \to \infty} P(A_n) = P(A)
		\]
		
		\item $P$ непрерывна снизу:
		\[
			\forall \{A_n\}_{n = 1}^\infty \subseteq \cA,\ A_n \subseteq A_{n + 1} \wedge \lim_{n \to \infty} A_n = A \Ra \lim_{n \to \infty} P(A_n) = P(A)
		\]
	\end{enumerate}
\end{theorem}

\begin{note}
	Для последовательностей вложенных множеств предел $\lim_{n \to \infty} A_n = A$ понимается как либо $\bigcup_{n = 1}^\infty A_n$, либо $\bigcap_{n = 1}^\infty A_n$. Каждый в своём случае.
\end{note}

\begin{proof}~
	\begin{itemize}
		\item[$1 \Ra 3$] Перепишем последовательность из условия в дизъюнктном виде, то есть скажем, что $B_n = A_n \bs A_{n + 1}$. Тогда по условию верно следующее равенство:
		\[
			P(A_1) = P\ps{\bigcup_{n = 1}^\infty A_n} = P\ps{A \sqcup \bscup_{n = 1}^\infty B_n} = P(A) + \sum_{n = 1}^\infty P(B_n)
		\]
		При этом $P(A_1) \in [0; 1]$, то есть ряд сходится (и даже абсолютно, ибо все слагаемые неотрицательные). Стало быть, хвост ряда стремится к нулю:
		\[
			\forall \eps > 0\ \exists N \in \N \such \forall n > N\ \sum_{m = n}^\infty P(B_m) = P(A_n) - P(A) < \eps
		\]
		То есть $\lim_{n \to \infty} P(A_n) = P(A)$
		
		\item[$3 \Ra 4$] Рассмотрим противоположную последовательность к той, что дана в условии: $C_n = \Omega \bs A_n$. Тогда $C_n \supseteq C_{n + 1}$, причём $\lim_{n \to \infty} C_n = C := \Omega \bs A$. Следовательно, по уже доказанному $\lim_{n \to \infty} P(C_n) = P(C)$, а это в свою очередь расписывается просто:
		\[
			\lim_{n \to \infty} (1 - P(A_n)) = 1 - P(A) \Lora \lim_{n \to \infty} P(A_n) = P(A)
		\]
		
		\item[$4 \Ra 3$] Аналогично тому, что написано в предыдущем пункте.
		
		\item[$3 \Ra 2$] Тривиально.
		
		\item[$2 \Ra 1$] Пусть $A = \bscup_{n = 1}^\infty A_n$, $A, A_n \in \cA$. Тогда, мы можем рассмотреть следующие $B_n$:
		\[
			B_n = A \bs \bscup_{m = 1}^{n - 1} A_m
		\]
		Совершенно понятно, что тогда $B_1 = A$, а также $B_n \supseteq B_{n + 1}$ и $\lim_{n \to \infty} B_n = \emptyset$. Стало быть, по условию получаем следующее:
		\[
			\lim_{n \to \infty} P(B_n) = 0; \quad \lim_{n \to \infty} P\ps{A \bs \bscup_{m = 1}^{n - 1} A_m} = \lim_{n \to \infty} \ps{P(A) - \sum_{m = 1}^{n - 1} P(A_m)} = 0
		\]
		Если вынесем вероятность $A$ из под предела, то получится как раз требуемое:
		\[
			P(A) - \lim_{n \to \infty} \sum_{m = 1}^{n - 1} P(A_m) = 0; \quad P(A) = \sum_{m = 1}^\infty P(A_m)
		\]
	\end{itemize}
\end{proof}

\subsubsection*{Примеры вероятностных пространств}

\begin{enumerate}
	\item Дискретное вероятностное пространство:
	\begin{itemize}
		\item $\Omega$ --- не более чем счётное множество
		
		\item $\F = 2^\Omega$
		
		\item $P \colon \F \to [0; 1]$ с условием нормировки:
		\[
			\sum_{w \in \Omega} P(\{w\}) = 1
		\]
	\end{itemize}

	\item Геометрическое вероятностное пространство (одномерный случай):
	\begin{itemize}
		\item $\Omega = [a; b]$
		
		\item $\F = \B([a; b])$
		
		\item $P(A) = \frac{\mu(A)}{b - a}$, где $\mu$ --- мера Лебега на $\R$.
	\end{itemize}
\end{enumerate}

\section{Системы множеств}

\subsection{$\pi$- и $\lambda$-системы}

\begin{note}
	Мы фиксируем произвольное множество $\Omega$.
\end{note}

\begin{definition}
	Система $\cM$ подмножеств $\Omega$ называется \textit{$\pi$-системой}, если верно свойство:
	\[
		\forall A, B \in \cM\ \ A \cap B \in \cM
	\]
\end{definition}

\begin{example}
	$\cM = \{\rsi{a; b} \such a, b \in \R, a < b\} \cup \{\emptyset\}$
\end{example}

\begin{definition}
	Система $\cL$ подмножеств $\Omega$ называется \textit{$\lambda$-системой}, если выполнено несколько условий:
	\begin{enumerate}
		\item $\Omega \in \cL$
		
		\item $\forall A, B \in \cL, A \subseteq B \Ra B \bs A \in \cL$
		
		\item $\forall \{A_n\}_{n = 1}^\infty \subseteq \cL, A_n \subseteq A_{n + 1} \Ra A := \bigcup_{n = 1}^\infty A_n \in \cL$
	\end{enumerate}
\end{definition}

\begin{proposition}
	Система $\cL$ подмножеств $\Omega$ является $\lambda$-системой тогда и только тогда, когда выполнены следующие три свойства:
	\begin{enumerate}
		\item $\Omega \in \cL$
		
		\item Если $A \in \cL$, то $\ol{A} = \Omega \bs A \in \cL$
		
		\item Если $\{A_n\}_{n = 1}^\infty \subseteq \cL$, причём $\forall n \neq m\ A_n \cap A_m = \emptyset$, то $\bscup_{n = 1}^\infty A_n \in \cL$
	\end{enumerate}
\end{proposition}

\begin{proof}
	Первое свойство можно не обсуждать, а для остальных проведём доказательство в 2 стороны:
	\begin{itemize}
		\item[$\Ra$] Так как любое множество в $A \in \cL$ является подмножеством $\Omega$,то очевидно $\ol{A} \in \cL$ по второму свойству. Для третьего надо построить неубывающую последовательность:
		\[
			B_n := \bscup_{m = 1}^n A_m;\ \ \bscup_{m = 1}^\infty A_m = \bigcup_{n = 1}^\infty B_n \in \cL
		\]
		
		\item[$\La$] Имеет место равенство $B \bs A = B \cap \ol{A} = \ol{\ol{B} \cup A}$, причём $\ol{B} \cap A = \emptyset$, поэтому всё работает. Осталось разобраться с последним свойством: возьмём любую последовательность $\{A_n\}_{n = 1}^\infty \subseteq \cL,\ A_n \subseteq A_{n + 1}$. Тогда построим по ней такую последовательность:
		\[
			B_1 = A_1,\ B_n = A_n \bs A_{n - 1};\ \ \bigcup_{n = 1}^\infty A_n = \bscup_{n = 1}^\infty B_n \in \cL
		\]
	\end{itemize}
\end{proof}

\begin{theorem} (Первая теорема о $\pi-\lambda$-системах)
	Система $\F$ подмножеств $\Omega$ явлется $\sigma$-алгеброй тогда и только тогда, когда $\F$ является одновременно $\pi$- и $\lambda$-системой подмножеств $\Omega$.
\end{theorem}

\begin{proof}
	Проведём доказательство в две стороны:
	\begin{itemize}
		\item[$\Ra$] Очевидно
		
		\item[$\La$] Просто проверим свойства:
		\begin{enumerate}
			\item $\Omega \in \F$ --- выполнено по требованию $\lambda$-системы
			
			\item Пусть $\forall \{A_n\}_{n = 1}^\infty \subseteq \F$. Тогда построим $B_m \colon B_1 = A_1,\ B_m = A_m \bs \bigcup_{n = 1}^{m - 1} A_n$. Тогда $\bigcup_{n = 1}^\infty A_n = \bscup_{m = 1}^\infty B_m \in \F$
			
			\item Остаётся проверить, что у нас есть замкнутость операций кольца, то есть симметрической разности:
			\[
				A \tr B = (A \bs (A \cap B)) \sqcup (B \bs (A \cap B))
			\]
			Пересечение и дизъюнктное объединение есть по условию, а также разность для вложенных множеств есть по требованию $\lambda$-системы.
		\end{enumerate}
	\end{itemize}
\end{proof}

\begin{proposition}
	Пусть $\cM$ --- система подмножеств $\Omega$. Тогда существует минимальная по включению $\sigma$-алгебра (алгебра, $\pi$-система, $\lambda$-система), обозначаемая как $\sigma(\cM)$ ($\cA(\cM), \pi(\cM), \lambda(\cM)$) и содержащая $\cM$.
\end{proposition}

\begin{example}~
	\begin{enumerate}
		\item $\Omega = \R$, то борелевскую $\sigma$-алгебру $\B(\R)$ можно породить как $\sigma$-алгебру. содержащую все интервалы:
		\[
			\B(\R) = \sigma(\{(a; b), a < b\})
		\]
		
		\item $\Omega = \R^n$, $n > 1$. Тогда борелевскую $\sigma$-алгебру в $\R^n$ можно породить так:
		\[
			\B(\R^n) = \sigma(\{B_1 \times \ldots \times B_n,\ B_i \in \B(\R)\})
		\]
	\end{enumerate}
\end{example}

\begin{exercise}
	Проверить, что $\B(\R^n)$ можно задать следующими способами:
	\begin{itemize}
		\item $\sigma(\{(a_1, b_1) \times \ldots \times (a_n, b_n), a_i < b_i\})$
		
		\item $\sigma(\{\rsi{-\infty; x_1} \times \ldots \times \rsi{-\infty; x_n}, x_i \in \R\})$
		
		\item $\sigma(\{A \subseteq \R^n \text{ --- открытые множества}\})$
	\end{itemize}
\end{exercise}

\begin{example}~
	\begin{enumerate}
		\item[3.] $\Omega = \R^\infty$ (более правильно писать $\R^\N$). Иначе говоря:
		\[
			\Omega = \{(x_1, x_2, \ldots) \such x_i \in \R\} \text{ --- последовательности вещественных чисел}
		\]
		Можно определить понятие <<цилиндра>>: пусть $n \in \N$ и $B_n \in \B(\R^n)$. Тогда $F_n(B_n) = \{\vv{x} \in \R^\infty \colon (x_1, \ldots, x_n) \in B_n\}$. Тогда
		\[
			\B(\R^\infty) = \sigma(\{F_n(B_n) \colon \forall n \in \N, B_n \in \B(\R^n)\})
		\]
	\end{enumerate}
\end{example}

\begin{theorem} (Вторая теорема о $\pi$- и $\lambda$-системах)
	Если $\cM$ --- это $\pi$-система подмножеств $\Omega$, то $\sigma(\cM) = \lambda(\cM)$.
\end{theorem}

\begin{proof}
	Заметим, что $\sigma(\cM)$ --- это $\lambda$-система, содержащая $\cM$. Значит, уже $\lambda(\cM) \subseteq \sigma(\cM)$.
	
	Теперь надо показать, что $\lambda(\cM)$ --- это тоже $\sigma$-алгебра. Из того, что это уже $\lambda$-система, по первой теореме нам нужно проверить лишь замкнутость относительно пересечения. Рассмотрим систему подходящих множеств $\cM_1$:
	\[
		\cM_1 = \{B \in \lambda(\cM) \colon \forall A \in \cM\ A \cap B \in \lambda(\cM)\}
	\]
	Она непустая, коль скоро $\cM \subseteq \cM_1$. Если мы покажем, что это $\lambda$-система, то она автоматически по вложению $\cM_1 \subseteq \lambda(\cM)$ совпадает с $\lambda(\cM)$. Однако, она ещё не будет являться $\sigma$-алгеброй, ибо мы не потребовали в $\cM_1$ попарного пересечения любых множеств:
	\begin{enumerate}
		\item $\Omega \in \cM_1$ --- тривиально
		
		\item Пусть $B, C \in \cM_1$, $C \subseteq B$. Тогда $B \bs C \in \lambda(\cM)$ и надо показать, что также $B \bs C \in \cM_1$. Заметим следующий факт:
		\[
			\forall A \in \cM\ \ (B \bs C) \cap A = (B \cap A) \bs (C \cap A)
		\]
		Коль скоро $B, C \in \cM_1$, то $(B \cap A), (C \cap A) \in \lambda(\cM)$. Более того, $(B \cap A) \supseteq (C \cap A)$, то есть их разность тоже в $\lambda(\cM)$.
		
		\item Возьмём любую последовательность $\{B_n\}_{n = 1}^\infty \subseteq \cM_1,\ B_n \subseteq B_{n + 1}$. Обозначим $B := \bigcup_{n = 1}^\infty B_n \in \lambda(\cM)$ и рассмотрим его пересечение с произвольным $A \in \cM$:
		\[
			B \cap A = \ps{\bigcup_{n = 1}^\infty B_n} \cap A = \bigcup_{n = 1}^\infty (B_n \cap A) \in \lambda(M)
		\]
		В конечном факте о принадлежности мы пользуемся тем, что $(B_n \cap A) \in \lambda(\cM)$ и они образуют неубывающую последовательность.
	\end{enumerate}
	Теперь же мы добьёмся своего, положим $\cM_2$ как надо:
	\[
		\cM_2 = \{B \in \lambda(\cM) \colon \forall A \in \lambda(\cM)\ A \cap B \in \lambda(\cM)\}
	\]
	Благодаря тому, что $\cM \subseteq \cM_1 = \lambda(\cM) \subseteq \cM_2$, мы можем заявить вложение $\cM \subseteq \cM_2$. Остаётся проверить, что $\cM_2$ тоже является $\lambda$-системой, но это делается точно так же, как и выше. Таким образом, $\lambda(\cM) \supseteq \sigma(\cM)$
\end{proof}