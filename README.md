# Клуб Теха Лекций

В данном репозитории хранятся исходники tex-конспектов лекций курсов, читаемых на ФПМИ МФТИ.  
- Сами pdf-конспекты можно найти на [нашем диске](https://disk.yandex.ru/d/IDUn8-HtGvIBYA)
- Подробнее о КТЛ можно узнать в [нашей группе Вконтакте](https://vk.com/mipt_ltc)

## Инструкция для авторов

0. Обратитесь к сообщения группы или ко [мне](https://vk.com/ax_equals_b) в личку, чтобы получить доступ к записи в репозиторий

1. Посетите наш диск и посмотрите, есть ли там уже папка с тем предметом, который вы будете конспектировать. Если его там нет — пишите в сообщество и согласуйте название для папки. Мы стараемся придерживаться честных названий на английском языке :)

2. Склонируйте репозиторий: ```$ git clone https://github.com/daniild71r/lectures_tex_club```
   
   Создайте в нем свою ветку с уникальным названием, и в своей ветке добавьте в `config.json` запись следующего вида: ```"branch_name": ["l/5/Subject_Name/2022_Lecturer", ...]```, где: 
   - `l` — сокращение от lectures (`s` - seminars, `e` - exams)
   - `5` — номер семестра   
   - `Subject_Name` — название предмета (**ОБЯЗАТЕЛЬНО** в латинской раскладке и именно в таком формате), совпадающее с названием папки на диске
   - `2022_Lecturer` — текущий год и фамилия лектора, тоже **ОБЯЗАТЕЛЬНО** в латинской раскладке  

   Укажите в списке все курсы, которые планируете обновлять, наш CI будет компилировать их (и только их) заново при получении нового кода от вас.
   
   Команда для создания ветки и перехода в нее: ```$ git checkout -b branch_name```

3. В созданной ветке создайте директорию с вашим конспектом на пути `Lectures/5_Semester/Subject_Name/2022_Lecturer/main.tex` (главный файл **ДОЛЖЕН** называться `main.tex`)

4. Разместив в директории все используемые вашим мейном tex-файлы (и, возможно, картинки), повторите мантру из трех команд:
   ```
   $ git add .
   $ git commit -m "added lecture 5"
   $ git push -u origin branch_name
   ```
   Да, в третьей команде придется продублировать название ветки, но только в первый раз! Все последующие разы достаточно будет команды `$ git push origin`

4. Дождитесь конца (автоматической) компиляции ваших работ и их загрузки на диск.

5. Создайте pull-request для слияния с мастер-веткой `main`, я приму его руками.

6. Вы восхитительны, ваши конспекты теперь на диске, а исходный код - в репозитории!

---

### Возможные проблемы с гитом:

1. Все названия вида `branch_name` можно оборачивать в кавычки `“branch_name”,` если в них есть командные символы, вроде &.

2. Если merge будет ругаться на какие-то несостыковки, можно попробовать исправить ошибку, подгрузив в вашу локальную ветку изменения из `main`. Это делается командой `git pull origin main`. После этого повториите попытку.


 ### Возможные причины поломки Actions:

 1. Не используйте `\include`, только `\input`
 
 2. Если у вас есть изображения формата `pdf`, их нужно добавлять используя суффикс `-f` (поскольку `pdf`-файлы игнорятся файлом `.gitignore`):
    `$ git add -f images/picture.pdf`
    
    PS: Нигде больше не следует использовать аргумент `-f`
    
    PPS: Не делайте `$ git add -f .`, так Вы добавите и `main.pdf`, и возможно не только его!
    
 3. Используйте только латиницу для названий всех файлов и папок (в том числе изображений).

Если проблема не решилась, хорошей идеей будет клонировать репозиторий в другую папку и в ней попробовать скомпилировать код командой `$ pdflatex .../main.tex` или запустить его в другом компиляторе (`texstudio`/`vimtex`) и проверить на наличие ошибок. Если все эти шаги и усердные обращения в гугл не помогут, пишите нам - постараемся разобраться!
